<html>
    <head>
        <title>
            The App
        </title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    </head>

    <body>
        <style>
            .fill {
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
            }
        </style>
        <div id="app-container" class="fill"></div>
    </body>

    <script>
    var appContainer = document.getElementById("app-container");
    var fileAccess =
    {
        download: function(callback)
        {
            callback("Here's my beautiful code!");
        }
    };

    var loader =
    {
        loadScript: function( src, callback )
        {
            var scriptElement = document.createElement('script');
            scriptElement.onreadystatechange = scriptElement.onload = function()
            {
                var state = scriptElement.readyState;
                if ( ! callback.done && ( ! state || /loaded|complete/.test(state)))
                {
                    callback.done = true;
                    callback();
                }
            };
            scriptElement.src = src;
            scriptElement.async = true;
            document.getElementsByTagName('head')[0].appendChild(scriptElement);
        }
    };

    xmlhttp = new XMLHttpRequest();

    xmlhttp.open("GET", "main.js", true);
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var AppClass = eval(xmlhttp.responseText);
            AppClass.launch(loader, appContainer, function(app)
            {
                app.open(fileAccess);
            });
        }
    }

    xmlhttp.send();

    </script>

</html>

